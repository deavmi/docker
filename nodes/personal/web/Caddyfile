
{
	http_port "80"
	https_port "443"

	log default {
			output stdout
			level DEBUG
	}
}


# Domain name for automatic SSL
:80, {$DOMAIN}:443 {

	# Handle metrics
	handle /metrics {
	    metrics
	}

	# Sets the root of where we look
	# for files (with relative paths)
	root * /webroot

	# Serve directories in root
	handle * {
		file_server
	}
	
	# If we hit `/files`
	# then server root/files`
	# with a file browser
	handle /files* {
		file_server browse
	}

	# TODO: sub-path or reqwrite thing may be neede idk
	handle /quassel* {
		reverse_proxy quassel-web:64080
	}

	# Gitea service
	handle /git* {
		reverse_proxy services.deavmi.assigned.network
	}
}
